/* ==================== ROOT VARIABLES ==================== */
:root {
    /* Color Palette - Romantic & Soft */
    --pink-light: #FFB6C1;
    --pink-soft: #FF69B4;
    --pink-main: #FF1493;
    --red-pastel: #FF6B6B;
    --red-deep: #DC143C;
    --purple-soft: #DDA0DD;
    --bg-dark: #0a0a1a;
    --bg-dark-blue: #0d1b2a;
    --text-light: #ffffff;
    --text-soft: rgba(255, 255, 255, 0.85);
    --card-bg: rgba(255, 255, 255, 0.1);
    --card-border: rgba(255, 182, 193, 0.3);
    
    /* Font */
    --font-main: 'Mali', cursive, sans-serif;
    
    /* Transitions */
    --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ==================== ROTATE DEVICE OVERLAY ==================== */
/* Force landscape mode on mobile devices */
#rotate-device-overlay {
    display: none; /* Hidden by default (landscape) */
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(135deg, #0f0f1b 0%, #1a0a2e 50%, #0f0f1b 100%);
    z-index: 99999; /* On top of EVERYTHING */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 30px;
    text-align: center;
    padding: 30px;
}

/* Show overlay only in portrait mode */
@media screen and (orientation: portrait) {
    #rotate-device-overlay {
        display: flex;
    }
}

/* Phone rotation animation container */
.rotate-phone-icon {
    position: relative;
    width: 100px;
    height: 100px;
}

/* Phone device SVG/icon */
.phone-device {
    font-size: 4rem;
    color: var(--pink-soft);
    display: block;
    animation: rotatePhone 2s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.5));
}

@keyframes rotatePhone {
    0%, 10% {
        transform: rotate(0deg);
    }
    40%, 60% {
        transform: rotate(-90deg);
    }
    90%, 100% {
        transform: rotate(0deg);
    }
}

/* Rotation arrows */
.rotate-arrows {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5rem;
    color: var(--pink-light);
    opacity: 0;
    animation: arrowPulse 2s ease-in-out infinite;
}

@keyframes arrowPulse {
    0%, 10% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
    25% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2);
    }
    40%, 100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
}

/* Rotate message text */
.rotate-message {
    font-family: var(--font-main);
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-light);
    line-height: 1.8;
    max-width: 300px;
}

.rotate-message .highlight {
    color: var(--pink-soft);
    display: block;
    font-size: 1.5rem;
    margin-bottom: 10px;
}

.rotate-message .emoji {
    font-size: 1.5rem;
    display: inline-block;
    animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* Decorative hearts around the overlay */
.rotate-decoration {
    position: absolute;
    font-size: 2rem;
    opacity: 0.3;
    animation: floatSoft 4s ease-in-out infinite;
}

.rotate-decoration:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
.rotate-decoration:nth-child(2) { top: 15%; right: 15%; animation-delay: 1s; }
.rotate-decoration:nth-child(3) { bottom: 20%; left: 15%; animation-delay: 2s; }
.rotate-decoration:nth-child(4) { bottom: 15%; right: 10%; animation-delay: 0.5s; }

@keyframes floatSoft {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(10deg); }
}

/* ==================== RESET & BASE ==================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-main);
    background: var(--bg-dark);
    color: var(--text-light);
    overflow-x: hidden;
    line-height: 1.6;
}

/* Hide scrollbar but allow scrolling */
body::-webkit-scrollbar {
    width: 8px;
}

body::-webkit-scrollbar-track {
    background: var(--bg-dark);
}

body::-webkit-scrollbar-thumb {
    background: var(--pink-soft);
    border-radius: 4px;
}

/* ==================== INTRO SCREEN ==================== */
.intro-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    height: 100dvh;
    background: transparent;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 1.5s ease, visibility 1.5s ease;
    pointer-events: none; /* Allow starfield interaction */
}

.intro-screen.fade-out {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

/* ==================== TWINKLING STARS ==================== */
.stars-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
}

.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--duration) ease-in-out infinite;
    animation-delay: var(--delay);
}

@keyframes twinkle {
    0%, 100% { 
        opacity: 0.3;
        transform: scale(1);
    }
    50% { 
        opacity: 1;
        transform: scale(1.2);
    }
}

/* ==================== 3D STARFIELD BACKGROUND ==================== */
.starfield-3d {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: all; /* Enable interaction */
    perspective: 1000px;
    transform-style: preserve-3d;
    background: radial-gradient(ellipse at center, #1a0a2e 0%, #0a0a1a 70%, #050510 100%);
}

/* Star layer containers for 3D parallax */
.star-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.1s ease-out;
    pointer-events: none;
}

/* Individual 3D Star */
.star-3d {
    position: absolute;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 6px rgba(255, 255, 255, 0.8);
    animation: 
        twinkle3d var(--twinkle-duration) ease-in-out infinite var(--twinkle-delay);
}

/* Star layers with different depths */
.star-layer-far {
    opacity: 0.4;
    filter: blur(0.5px);
}

.star-layer-mid {
    opacity: 0.7;
}

.star-layer-near {
    opacity: 1;
    box-shadow: 
        0 0 10px rgba(255, 255, 255, 0.9),
        0 0 20px rgba(255, 182, 193, 0.4);
}

/* Colored stars for variety */
.star-3d:nth-child(5n) {
    background: linear-gradient(135deg, #fff 50%, #ffd6e0 50%);
}

.star-3d:nth-child(7n) {
    background: linear-gradient(135deg, #fff 50%, #d6e5ff 50%);
}

.star-3d:nth-child(11n) {
    background: linear-gradient(135deg, #fff 50%, #ffffd6 50%);
}

/* Twinkle animation */
@keyframes twinkle3d {
    0%, 100% { 
        opacity: var(--base-opacity, 0.6);
        transform: scale(1);
    }
    50% { 
        opacity: 1;
        transform: scale(1.3);
    }
}

/* Slow drift animation for parallax effect */
@keyframes drift3d {
    0% {
        transform: translate3d(0, 0, 0);
    }
    25% {
        transform: translate3d(15px, -10px, 20px);
    }
    50% {
        transform: translate3d(0, -5px, 40px);
    }
    75% {
        transform: translate3d(-15px, -10px, 20px);
    }
    100% {
        transform: translate3d(0, 0, 0);
    }
}

/* Shooting Star - Diagonal direction (top to bottom) */
.shooting-star {
    position: absolute;
    width: var(--tail-length, 100px);
    height: var(--tail-width, 2px);
    background: linear-gradient(to left, white, rgba(255, 255, 255, 0.8) 10%, transparent 100%);
    border-radius: 100px;
    transform: rotate(135deg);
    box-shadow: 
        0 0 10px 1px rgba(255, 255, 255, 0.6),
        0 0 20px 2px rgba(255, 182, 193, 0.4);
    animation: shootingStar var(--duration, 1s) ease-out forwards;
    z-index: 10;
}

/* Small shooting star */
.shooting-star.small {
    --tail-length: 60px;
    --tail-width: 1px;
    --duration: 0.7s;
}

/* Large shooting star */
.shooting-star.large {
    --tail-length: 150px;
    --tail-width: 3px;
    --duration: 1.3s;
    box-shadow: 
        0 0 15px 2px rgba(255, 255, 255, 0.8),
        0 0 30px 4px rgba(255, 182, 193, 0.5);
}

@keyframes shootingStar {
    0% {
        opacity: 1;
    }
    70% {
        opacity: 1;
    }
    100% {
        transform: rotate(135deg) translate(350px, 0);
        opacity: 0;
    }
}

/* Nebula glow effect */
.starfield-3d::before {
    content: '';
    position: absolute;
    top: 20%;
    left: 30%;
    width: 40%;
    height: 40%;
    background: radial-gradient(ellipse, 
        rgba(255, 105, 180, 0.08) 0%, 
        rgba(138, 43, 226, 0.05) 40%, 
        transparent 70%);
    filter: blur(40px);
    animation: nebulaFloat 20s ease-in-out infinite;
    z-index: 0;
}

.starfield-3d::after {
    content: '';
    position: absolute;
    bottom: 30%;
    right: 20%;
    width: 35%;
    height: 35%;
    background: radial-gradient(ellipse, 
        rgba(100, 149, 237, 0.06) 0%, 
        rgba(75, 0, 130, 0.04) 40%, 
        transparent 70%);
    filter: blur(50px);
    animation: nebulaFloat 25s ease-in-out infinite reverse;
    z-index: 0;
}

@keyframes nebulaFloat {
    0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.6;
    }
    50% {
        transform: translate(30px, -20px) scale(1.1);
        opacity: 0.9;
    }
}

/* ==================== FLOATING HEARTS ==================== */
.floating-hearts {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
}

.floating-heart {
    position: absolute;
    color: var(--pink-soft);
    opacity: 0.6;
    animation: floatUp var(--duration) ease-in-out infinite;
    animation-delay: var(--delay);
}

@keyframes floatUp {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 0.6;
    }
    90% {
        opacity: 0.6;
    }
    100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
    }
}

/* ==================== INTRO CONTENT ==================== */
.intro-content {
    position: relative;
    z-index: 10;
    text-align: center;
    padding: 20px;
    max-width: 90%;
    pointer-events: auto; /* Re-enable interaction for content */
}

.intro-icon {
    font-size: 4rem;
    color: var(--pink-main);
    margin-bottom: 20px;
    animation: heartbeat 1.5s ease-in-out infinite;
}

@keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    14% { transform: scale(1.15); }
    28% { transform: scale(1); }
    42% { transform: scale(1.15); }
    70% { transform: scale(1); }
}

.typing-text {
    font-size: clamp(1.8rem, 6vw, 3rem);
    font-weight: 600;
    color: var(--text-light);
    margin-bottom: 15px;
    min-height: 1.5em;
}

.typing-text::after {
    content: '|';
    animation: blink 0.7s infinite;
    color: var(--pink-soft);
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

.sub-text {
    font-size: clamp(1rem, 3.5vw, 1.3rem);
    color: var(--text-soft);
    margin-bottom: 40px;
    opacity: 0;
    transform: translateY(20px);
    transition: var(--transition-smooth);
}

.sub-text.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ==================== PULSE BUTTON ==================== */
.pulse-button {
    position: relative;
    padding: 18px 45px;
    font-family: var(--font-main);
    font-size: clamp(1rem, 3.5vw, 1.2rem);
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, var(--pink-main), var(--red-pastel));
    border: none;
    border-radius: 50px;
    cursor: pointer;
    overflow: hidden;
    transition: var(--transition-smooth);
    box-shadow: 0 4px 25px rgba(255, 20, 147, 0.4);
    opacity: 0;
    transform: translateY(20px);
}

.pulse-button.visible {
    opacity: 1;
    transform: translateY(0);
    animation: pulse 2s ease-in-out infinite;
}

.pulse-button span {
    position: relative;
    z-index: 2;
}

.pulse-button i {
    margin-left: 10px;
    font-size: 1.1em;
}

.pulse-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.pulse-button:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 35px rgba(255, 20, 147, 0.6);
}

.pulse-button:hover::before {
    width: 300px;
    height: 300px;
}

.pulse-button:active {
    transform: scale(0.98);
}

@keyframes pulse {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(255, 20, 147, 0.5);
    }
    50% {
        box-shadow: 0 0 0 20px rgba(255, 20, 147, 0);
    }
}

/* ==================== MAIN CONTAINER ==================== */
.main-container {
    opacity: 0;
    visibility: hidden;
    transition: opacity 1s ease 0.5s;
}

.main-container.visible {
    opacity: 1;
    visibility: visible;
}

/* ==================== SECTIONS BASE ==================== */
.section {
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    position: relative;
}

.section-inner {
    max-width: 1200px;
    width: 100%;
    text-align: center;
}

.section-title {
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 700;
    color: var(--pink-light);
    margin-bottom: 10px;
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-smooth);
}

.section-title.visible {
    opacity: 1;
    transform: translateY(0);
}

.section-title i {
    margin-right: 10px;
    color: var(--pink-main);
}

.section-subtitle {
    font-size: 1rem;
    color: var(--text-soft);
    margin-bottom: 30px;
    opacity: 0;
    transition: var(--transition-smooth);
    transition-delay: 0.2s;
}

.section-subtitle.visible {
    opacity: 1;
}

/* ==================== SECTION 2: INTERACTIVE DIARY (MULTIMEDIA PHOTOBOOK) ==================== */
/* ===== 13-PAGE PHOTOBOOK WITH CENTERING LOGIC ===== */
/* ===== OPTIMIZED FOR LANDSCAPE - NO SCROLL ===== */

.page-diary {
    overflow: hidden;
    height: 100vh;
    width: 100vw;
}

.section-diary {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    overflow: hidden;
    background: transparent;
    z-index: 2;
    pointer-events: none;
}

/* ===== PHOTOBOOK WRAPPER - Handles centering logic ===== */
.photobook-wrapper {
    position: relative;
    perspective: 2500px;
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
}

/* When book is open, show left page */
.photobook-wrapper.book-open {
    transform: translateX(0);
    justify-content: center;
}

/* ===== LEFT PAGE - Text content ===== */
.left-page {
    position: relative;
    width: 55vh;
    height: 80vh;
    max-height: 80vh;
    flex-shrink: 0;
    align-self: center;
    background: linear-gradient(135deg, #fdfbf7 0%, #f8f4eb 100%);
    border-radius: 10px 0 0 10px;
    box-shadow: 
        -5px 0 15px rgba(0,0,0,0.1),
        inset 5px 0 15px rgba(139, 90, 43, 0.08);
    display: flex;
    opacity: 0;
    transform: translateX(-30px);
    pointer-events: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: visible;
    margin-right: -2px; /* Connect with right page */
    z-index: 5;
    transition: opacity 0.6s ease 0.4s, transform 0.6s ease 0.4s;
}

.photobook-wrapper.book-open .left-page {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
    cursor: pointer;
}

/* Page lines on left page */
.left-page > .page-lines {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
        transparent,
        transparent 2.2vh,
        rgba(200, 180, 160, 0.3) 2.2vh,
        rgba(200, 180, 160, 0.3) 2.3vh
    );
    pointer-events: none;
    z-index: 0;
}

/* Left page content blocks */
.left-content {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 4vh 3vw;
    width: 100%;
    height: 100%;
    max-height: 100%;
    box-sizing: border-box;
    overflow: visible;
    z-index: 10;
}

.left-content.active {
    display: flex;
    animation: fadeInText 0.6s ease-out 0.4s both;
}

@keyframes fadeInText {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.left-content .chapter-badge {
    font-size: clamp(1.1rem, 2.5vh, 1.5rem);
    padding: 1.2vh 2.5vw;
    margin-bottom: 3vh;
}

.left-content .handwritten-text {
    font-size: clamp(1.1rem, 2.4vh, 1.4rem);
    line-height: 1.9;
    margin: 1.5vh 0;
    max-width: 85%;
}

.left-content .big-text {
    font-size: clamp(1.3rem, 3vh, 1.7rem);
    line-height: 1.7;
    color: #d32f2f;
}

.left-content .warning-text {
    font-size: clamp(1rem, 2.2vh, 1.3rem);
    color: #ff5722;
    font-weight: 600;
    margin-top: 2vh;
}

.left-content .page-doodle {
    font-size: clamp(1.2rem, 2.5vh, 1.5rem);
    margin-top: 3vh;
}

/* ===== CORNER NOTES - Cute romantic details ===== */
.corner-note {
    position: absolute;
    font-family: 'Dancing Script', 'Mali', cursive;
    font-size: clamp(0.7rem, 1.6vh, 0.95rem);
    color: #e91e63;
    opacity: 0.85;
    padding: 0.3em 0.6em;
    background: linear-gradient(to right, transparent, rgba(255, 182, 193, 0.25), transparent);
    border-radius: 4px;
    white-space: nowrap;
    pointer-events: none;
    z-index: 10;
}

.corner-note.top-left {
    top: 8%;
    left: 5%;
    transform: rotate(-5deg);
}

.corner-note.top-right {
    top: 8%;
    right: 5%;
    transform: rotate(5deg);
}

.corner-note.bottom-left {
    bottom: 8%;
    left: 5%;
    transform: rotate(3deg);
}

.corner-note.bottom-right {
    bottom: 8%;
    right: 5%;
    transform: rotate(-3deg);
}

/* ===== PHOTOBOOK - Single page book ===== */
.photobook {
    position: relative;
    width: 55vh;  /* Single page width */
    height: 80vh; /* 80% of viewport height */
    flex-shrink: 0;
    align-self: center;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
    overflow: hidden;
    pointer-events: auto;
}

/* Book thickness effect - stacked shadows */
.photobook::before {
    content: '';
    position: absolute;
    left: 0;
    top: 2px;
    width: 100%;
    height: 100%;
    background: linear-gradient(to right, 
        #d4c4b0 0%, 
        #e8dcc8 2px, 
        #d4c4b0 4px,
        #c4b4a0 6px,
        #b4a490 8px);
    border-radius: 0 10px 10px 0;
    transform: translateZ(-8px);
    box-shadow: 
        -1px 0 0 #c4b4a0,
        -2px 1px 0 #b4a490,
        -3px 2px 0 #a49480,
        -4px 3px 0 #948470,
        -5px 4px 15px rgba(0,0,0,0.3);
}

/* ===== INDIVIDUAL BOOK PAGE ===== */
.book-page {
    position: absolute;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transform-origin: left center;
    transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
    cursor: pointer;
}

/* Page stacking z-index */
#page-1 { z-index: 13; }
#page-2 { z-index: 12; }
#page-3 { z-index: 11; }
#page-4 { z-index: 10; }
#page-5 { z-index: 9; }
#page-6 { z-index: 8; }
#page-7 { z-index: 7; }
#page-8 { z-index: 6; }
#page-9 { z-index: 5; }
#page-10 { z-index: 4; }
#page-11 { z-index: 3; }
#page-12 { z-index: 2; }
#page-13 { z-index: 1; }

/* Flipped state */
.book-page.flipped {
    transform: rotateY(-180deg);
    z-index: 20 !important;
}

/* ===== PAGE FRONT & BACK ===== */
.page-front,
.page-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 0 10px 10px 0;
    overflow: hidden;
}

.page-front {
    background: #fdfbf7;
    box-shadow: 
        0 0 20px rgba(0,0,0,0.15),
        inset -5px 0 15px rgba(139, 90, 43, 0.08);
    z-index: 2;
}

.page-back {
    background: linear-gradient(135deg, #f8f4eb 0%, #f0ebe0 100%);
    transform: rotateY(180deg);
    box-shadow: 
        0 0 20px rgba(0,0,0,0.15),
        inset 5px 0 15px rgba(139, 90, 43, 0.08);
}

/* Hide all content inside page-back - using left-page for text instead */
.page-back > * {
    display: none !important;
}

/* ===== SINGLE PAGE LAYOUT (for Page 2 - text + photo together) ===== */
.single-page {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #fdfbf7;
    border-radius: 0 10px 10px 0;
}

.page-content-single {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2vh;
    padding: 3vh 4vw;
    text-align: center;
    max-width: 95%;
    z-index: 1;
}

.photo-center {
    max-width: 90%;
    max-height: 70%;
    margin: 0.5vh 0;
}

.photo-center .media-content {
    aspect-ratio: 4/3;
}

/* Media Row - horizontal row of 2 items */
.media-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2vw;
    width: 100%;
    margin: 1vh 0;
}

.media-row.compare-row {
    gap: 1.5vw;
    width: 100%;
    justify-content: center;
}

.compare-arrow {
    font-size: 2.5rem;
    color: #e91e63;
    animation: pulse-arrow 1.5s ease-in-out infinite;
}

@keyframes pulse-arrow {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.2); opacity: 1; }
}

/* Small polaroid for fitting 2 per row */
.polaroid.small {
    width: 45%;
    max-width: 35vh;
}

.polaroid.small .media-content {
    aspect-ratio: 3/4;
}

.polaroid.small .media-content img,
.polaroid.small .media-content video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Small text for condensed pages */
.handwritten-text.small-text {
    font-size: clamp(0.85rem, 1.8vh, 1.1rem);
    line-height: 1.5;
    margin: 0.5vh 0;
}

/* Text only page styling */
.text-only-page {
    justify-content: center;
    gap: 3vh;
}

.text-only-page .handwritten-text {
    font-size: clamp(1.1rem, 2.5vh, 1.5rem);
    line-height: 1.6;
}

.text-only-page .big-text {
    font-size: clamp(1.2rem, 2.8vh, 1.7rem);
    color: #d32f2f;
}

.text-only-page .warning-text {
    font-size: clamp(0.9rem, 2vh, 1.2rem);
    color: #ff7043;
    margin-top: 2vh;
}

/* Chapter badges compact */
.chapter-badge {
    font-size: clamp(0.8rem, 1.8vh, 1.1rem);
    padding: 0.5vh 1.5vw;
    margin-bottom: 1vh;
}

/* Page doodle compact */
.page-doodle {
    font-size: clamp(0.8rem, 1.5vh, 1rem);
    margin-top: 1vh;
}

/* ===== SPREAD VIEW: Text on Back, Images on Front ===== */

/* Text content on page-back (left side when spread is open) */
.story-text-back {
    display: none !important; /* Hidden - using left-page for text instead */
}

.story-text-back .chapter-badge {
    font-size: clamp(1rem, 2.5vh, 1.4rem);
    padding: 1vh 2vw;
    margin-bottom: 2vh;
}

.story-text-back .handwritten-text {
    font-size: clamp(1rem, 2.2vh, 1.3rem);
    line-height: 1.8;
    margin: 1vh 0;
    max-width: 90%;
}

.story-text-back .page-doodle {
    font-size: clamp(1rem, 2vh, 1.3rem);
    margin-top: 2vh;
}

/* Text-only back page */
.text-only-back {
    gap: 2vh;
}

.text-only-back .big-text {
    font-size: clamp(1.2rem, 2.8vh, 1.6rem);
    line-height: 1.6;
}

.text-only-back .warning-text {
    font-size: clamp(1.1rem, 2.5vh, 1.4rem);
    color: #ff5722;
    font-weight: 600;
}

/* Media content on page-front (right side when spread is open) */
.media-page {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5vh 1vw;
    box-sizing: border-box;
    z-index: 1;
}

.media-grid-page {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 1.5vh 1.5vw;
    max-width: 98%;
}

.media-grid-page .polaroid {
    width: 46%;
    max-width: 35vh;
}

.media-grid-page .polaroid .media-content {
    aspect-ratio: 1/1;
}

.media-grid-page .polaroid .media-content img,
.media-grid-page .polaroid .media-content video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Grid with 3 items */
.media-grid-page.grid-3 {
    gap: 0.8vh 0.8vw;
}

.media-grid-page.grid-3 .polaroid {
    width: 38%;
    max-width: 28vh;
}

/* Compare grid for Xưa & Nay */
.compare-grid {
    flex-wrap: nowrap;
    gap: 1vw;
}

.compare-arrow-big {
    font-size: 3rem;
    color: #e91e63;
    animation: pulse-arrow 1.5s ease-in-out infinite;
}

/* Page 12: Xưa & Nay - Maximize image size */
#page-12 .page-content-single {
    padding: 1vh 1vw;
    gap: 0.5vh;
}

#page-12 .media-row.compare-row {
    flex: 1;
    max-height: 85%;
}

#page-12 .polaroid.small {
    width: 48%;
    max-width: 42vh;
    height: 100%;
}

#page-12 .polaroid.small .media-content {
    aspect-ratio: auto;
    height: calc(100% - 3vmin);
}

#page-12 .handwritten-text {
    font-size: clamp(0.9rem, 2vh, 1.2rem);
    margin-bottom: 0.5vh !important;
}

/* Final page with button */
.final-page {
    gap: 2vh;
}

.final-page .continue-btn {
    margin-top: 2vh;
}

/* ===== SPREAD LAYOUT (Left Text + Right Media) - For pages 3+ ===== */
.spread-layout {
    display: flex;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

.spread-left,
.spread-right {
    width: 50%;
    height: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2vh 2vw;
    box-sizing: border-box;
    overflow: hidden;
}

.spread-left {
    border-right: 1px solid rgba(139, 90, 43, 0.15);
    background: #fdfbf7;
}

.spread-right {
    background: #faf8f3;
}

/* Full spread for text-only pages (Page 7) */
.full-text-spread {
    width: 100%;
}

.full-text-spread .spread-full {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4vh 5vw;
    box-sizing: border-box;
    background: linear-gradient(135deg, #fdfbf7 0%, #faf6f0 100%);
    border-radius: 0 10px 10px 0;
}

/* ===== PAPER TEXTURE ===== */
.page-paper {
    position: relative;
}

.page-lines {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        repeating-linear-gradient(
            transparent,
            transparent 24px,
            rgba(200, 180, 160, 0.25) 24px,
            rgba(200, 180, 160, 0.25) 25px
        );
    pointer-events: none;
    z-index: 0;
}

.page-inner-design {
    width: 100%;
    height: 100%;
    background: 
        repeating-linear-gradient(
            transparent,
            transparent 24px,
            rgba(200, 180, 160, 0.2) 24px,
            rgba(200, 180, 160, 0.2) 25px
        );
    opacity: 0.6;
}

/* ===== STORY TEXT STYLING ===== */
.story-text {
    position: relative;
    z-index: 1;
    text-align: center;
    max-width: 90%;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5vh;
    padding: 1vh 1vw;
    box-sizing: border-box;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.handwritten-text {
    font-family: 'Dancing Script', 'Mali', cursive;
    font-size: 2.6vmin;
    font-weight: 500;
    color: #3d2914;
    line-height: 1.8;
    text-align: center;
    margin: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
}

.big-text {
    font-size: 3.2vmin;
    line-height: 2;
    padding: 0 2vw;
}

.warning-text {
    font-size: 2.4vmin;
    color: #c9302c;
    font-weight: 600;
    margin-top: 2vh;
}

.centered-text {
    justify-content: center;
    height: 100%;
}

/* Chapter badges */
.chapter-badge {
    background: linear-gradient(135deg, #f0e6d8 0%, #e8ddd0 100%);
    padding: 0.8vh 2.5vmin;
    border-radius: 25px;
    font-family: var(--font-main);
    font-size: 2.2vmin;
    font-weight: 700;
    color: #5d4037;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.badge-storm { color: #546e7a; background: linear-gradient(135deg, #e0e7ed 0%, #cfd8dc 100%); }
.badge-happy { color: #388e3c; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); }
.badge-love { color: #c9302c; background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); }
.badge-cute { color: #e91e63; background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%); }
.badge-cool { color: #1976d2; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); }
.badge-princess { color: #9c27b0; background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); }
.badge-luxury { color: #ff8f00; background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%); }
.badge-time { color: #5d4037; background: linear-gradient(135deg, #efebe9 0%, #d7ccc8 100%); }

/* ===== MEDIA GRID LAYOUTS ===== */
.media-grid {
    position: relative;
    z-index: 1;
    display: grid;
    gap: 1.5vmin;
    width: 100%;
    height: auto;
    max-height: 90%;
    padding: 1vh;
}

/* Single item */
.grid-1 {
    grid-template-columns: 1fr;
    place-items: center;
}

/* 2 items side by side */
.grid-2 {
    grid-template-columns: repeat(2, 1fr);
    align-items: center;
}

/* 2 items comparison layout */
.grid-2-compare {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1vmin;
}

.compare-arrow {
    font-size: 4vmin;
    color: #c9302c;
    font-weight: bold;
}

/* 3 items */
.grid-3 {
    grid-template-columns: repeat(3, 1fr);
    align-items: center;
}

/* 3 mixed (2 images + 1 video) */
.grid-3-mixed {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
}

.grid-3-mixed .media-item:nth-child(3) {
    grid-column: span 2;
}

/* 4 items storm chaotic layout */
.grid-4-storm {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 1vmin;
}

.storm-tilt-1 { transform: rotate(-8deg) translate(5px, 5px); }
.storm-tilt-2 { transform: rotate(6deg) translate(-5px, 8px); }
.storm-tilt-3 { transform: rotate(4deg) translate(8px, -5px); }
.storm-tilt-4 { transform: rotate(-5deg) translate(-8px, -3px); }

/* 4 videos grid */
.grid-4-videos {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
}

/* 4 items grid */
.grid-4 {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 1.5vmin;
}

/* 5 items grid (2x2 + 1) */
.grid-5 {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 1.5vmin;
}

.grid-5 .media-item:nth-child(5) {
    grid-column: 2;
}

/* Page 4: Smaller images */
#page-4 .media-grid-page .polaroid {
    width: 38%;
    max-width: 28vh;
}

#page-4 .media-grid-page .polaroid .media-content {
    aspect-ratio: 1/1;
}

/* ===== MEDIA ITEM (Polaroid Style) ===== */
.media-item {
    position: relative;
    transition: transform 0.3s ease;
}

.media-item.polaroid {
    background: #ffffff;
    padding: 1vmin 1vmin 3vmin 1vmin;
    box-shadow: 
        2px 3px 12px rgba(0,0,0,0.12),
        1px 1px 3px rgba(0,0,0,0.08);
}

.media-item:hover {
    transform: scale(1.02) rotate(0deg) !important;
    z-index: 10;
}

.tilt-left { transform: rotate(-3deg); }
.tilt-right { transform: rotate(3deg); }

.media-content {
    width: 100%;
    aspect-ratio: 4/3;
    overflow: hidden;
    background: linear-gradient(135deg, #f5efe6 0%, #ebe5dc 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.media-content img,
.media-content video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.media-caption {
    position: absolute;
    bottom: 0.5vmin;
    left: 0;
    right: 0;
    text-align: center;
    font-family: var(--font-main);
    font-size: 1.8vmin;
    color: #5d4037;
    font-weight: 600;
    font-style: italic;
}

.photo-question {
    font-size: 1.3vmin;
    color: #c9302c;
}

/* Video indicator */
.video-indicator {
    position: absolute;
    bottom: 8px;
    right: 8px;
    width: 2.5vmin;
    height: 2.5vmin;
    background: rgba(0,0,0,0.5);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.7;
}

.video-indicator i {
    font-size: 1vmin;
    color: white;
}

/* ===== TAPE STYLES ===== */
.photo-tape {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%) rotate(2deg);
    width: 50px;
    height: 18px;
    background: linear-gradient(180deg,
        rgba(255, 220, 180, 0.85) 0%,
        rgba(255, 200, 150, 0.75) 100%);
    box-shadow: 0 2px 5px rgba(0,0,0,0.12);
    border-radius: 1px;
    z-index: 10;
}

.tape-style-2 {
    background: linear-gradient(180deg,
        rgba(255, 180, 200, 0.8) 0%,
        rgba(255, 150, 180, 0.7) 100%);
    transform: translateX(-50%) rotate(-3deg);
}

.tape-style-3 {
    background: linear-gradient(180deg,
        rgba(180, 220, 255, 0.8) 0%,
        rgba(150, 200, 255, 0.7) 100%);
    transform: translateX(-50%) rotate(4deg);
}

.tape-style-4 {
    background: linear-gradient(180deg,
        rgba(200, 255, 200, 0.8) 0%,
        rgba(170, 240, 170, 0.7) 100%);
    transform: translateX(-50%) rotate(-2deg);
}

/* ===== COVER PAGE ===== */
.page-cover {
    background: linear-gradient(145deg, #c9302c 0%, #a02622 40%, #8b1e1a 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 
        inset 0 0 60px rgba(0,0,0,0.4),
        inset 0 0 20px rgba(255,200,200,0.1),
        0 15px 50px rgba(0,0,0,0.5);
    background-image: 
        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
}

#page-1 .page-front {
    background: linear-gradient(145deg, #c9302c 0%, #a02622 40%, #8b1e1a 100%) !important;
}

/* Inside cover should be PAPER colored, not red */
#page-1 .page-back {
    background: linear-gradient(135deg, #fdfbf7 0%, #f8f4eb 100%) !important;
}

.cover-decoration {
    text-align: center;
    color: #fff5f0;
    position: relative;
    padding: 25px;
}

.cover-doodles {
    font-size: 1rem;
    opacity: 0.7;
    margin-bottom: 8px;
    letter-spacing: 6px;
}

.cover-heart-drawn {
    width: 80px;
    height: 65px;
    margin: 0 auto 12px;
}

.hand-drawn-heart {
    width: 100%;
    height: 100%;
    animation: heartDraw 3s ease-in-out infinite;
    filter: drop-shadow(0 3px 10px rgba(255,200,200,0.4));
}

.hand-drawn-heart path {
    stroke-dasharray: 300;
    stroke-dashoffset: 0;
    animation: drawHeart 2s ease-in-out infinite alternate;
}

@keyframes drawHeart {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: 50; }
}

@keyframes heartDraw {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.cover-title {
    font-family: var(--font-main);
    font-size: 5vmin;
    font-weight: 700;
    line-height: 1.2;
    text-shadow: 
        2px 2px 0 rgba(0,0,0,0.3),
        0 0 20px rgba(255,200,200,0.3);
    margin-bottom: 1vh;
    letter-spacing: 2px;
}

.cover-subtitle {
    font-family: var(--font-main);
    font-size: 2.5vmin;
    font-weight: 500;
    opacity: 0.85;
    font-style: italic;
}

.cover-tape {
    position: absolute;
    width: 60px;
    height: 20px;
    background: linear-gradient(135deg, 
        rgba(255, 235, 180, 0.7) 0%, 
        rgba(255, 220, 150, 0.6) 100%);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    border-radius: 2px;
}

.cover-tape-1 {
    top: 0px;
    right: 0px;
    transform: rotate(-18deg);
}

.cover-tape-2 {
    bottom: 0px;
    left: 0px;
    transform: rotate(12deg);
}

.cover-sticker {
    position: absolute;
    bottom: 0px;
    right: 0px;
    font-size: 1.8rem;
    transform: rotate(15deg);
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));
    animation: stickerWiggle 3s ease-in-out infinite;
}

@keyframes stickerWiggle {
    0%, 100% { transform: rotate(15deg) scale(1); }
    50% { transform: rotate(18deg) scale(1.05); }
}

/* ===== BACK COVER ===== */
.page-back-cover {
    background: linear-gradient(145deg, #b02825 0%, #8b1e1a 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 1.5vh;
}

.back-cover-content {
    text-align: center;
    color: #fff5f0;
}

.end-text {
    font-family: var(--font-main);
    font-size: 3vmin;
    font-style: italic;
    display: block;
    margin-bottom: 1vh;
}

.end-heart {
    font-size: 4vmin;
    display: block;
    animation: heartPulse 1.5s ease-in-out infinite;
}

@keyframes heartPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.end-subtext {
    font-size: 2vmin;
    opacity: 0.7;
    font-style: italic;
}

/* ===== DATE STAMP & DOODLES ===== */
.page-date-stamp {
    display: flex;
    align-items: center;
    gap: 1vmin;
    font-family: var(--font-main);
    font-size: 2vmin;
    color: #c9302c;
    font-weight: 700;
    background: rgba(201, 48, 44, 0.08);
    padding: 0.6vh 1.5vmin;
    border-radius: 20px;
    border: 1px dashed rgba(201, 48, 44, 0.3);
}

.page-date-stamp i {
    font-size: 1.8vmin;
}

.page-doodle {
    font-size: 2.5vmin;
    letter-spacing: 5px;
    opacity: 0.8;
}

.text-deco {
    display: inline;
    font-size: 2vmin;
}

/* ===== CONTINUE BUTTON ===== */
.continue-btn {
    margin-top: 1.5vh;
    padding: 1.2vh 3vmin;
    background: linear-gradient(135deg, #c9302c 0%, #a02622 100%);
    color: white;
    border: none;
    border-radius: 25px;
    font-family: var(--font-main);
    font-size: 2vmin;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(201, 48, 44, 0.35);
    display: inline-flex;
    align-items: center;
    gap: 1vmin;
    text-decoration: none;
}

.continue-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(201, 48, 44, 0.45);
}

.continue-btn i {
    transition: transform 0.3s ease;
    font-size: 2vmin;
}

.continue-btn:hover i {
    transform: translateX(4px);
}

/* ===== PAGE INDICATOR ===== */
.page-indicator {
    position: absolute;
    bottom: 2vh;
    left: 50%;
    transform: translateX(-50%);
    font-family: var(--font-main);
    font-size: 2vmin;
    color: var(--text-soft);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 1.5vmin;
    background: rgba(255, 255, 255, 0.08);
    padding: 0.8vh 2.5vmin;
    border-radius: 20px;
    backdrop-filter: blur(10px);
}

.page-indicator i {
    color: var(--pink-soft);
    font-size: 1.8vmin;
}

/* Navigation Hint */
.nav-hint {
    position: absolute;
    bottom: 8vh;
    left: 50%;
    transform: translateX(-50%);
    font-family: var(--font-main);
    font-size: 1.8vmin;
    color: var(--text-soft);
    opacity: 0.6;
    display: flex;
    align-items: center;
    gap: 1vmin;
    animation: fadeInOut 3s ease-in-out infinite;
}

@keyframes fadeInOut {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.7; }
}

/* Back Home Button */
.back-home-btn {
    position: fixed;
    top: 2vh;
    left: 2vw;
    width: 7vmin;
    height: 7vmin;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-soft);
    font-size: 2.5vmin;
    text-decoration: none;
    transition: all 0.3s ease;
    z-index: 100;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.back-home-btn:hover {
    background: var(--pink-soft);
    color: white;
    transform: scale(1.1);
}

/* End Toast Message */
.end-toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    background: rgba(201, 48, 44, 0.95);
    backdrop-filter: blur(15px);
    padding: 2.5vh 5vmin;
    border-radius: 25px;
    font-family: var(--font-main);
    font-size: 3.5vmin;
    font-weight: 700;
    color: #fff;
    text-align: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 15px 50px rgba(201, 48, 44, 0.5);
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.end-toast.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

.end-toast .toast-icon {
    display: block;
    font-size: 5vmin;
    margin-bottom: 1vh;
}

.end-toast .toast-text {
    display: block;
}

/* ===== PHOTOBOOK RESPONSIVE - Mobile Landscape ===== */
@media screen and (max-height: 500px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 60vh;
        height: 90vh;
    }
    
    .photobook-wrapper.book-open {
        transform: translateX(0);
    }
    
    /* Left page content responsive */
    .left-content {
        padding: 4vh 4vw;
    }
    
    .left-content .chapter-badge {
        font-size: 3vh;
        padding: 1vh 2.5vw;
        margin-bottom: 2vh;
    }
    
    .left-content .handwritten-text {
        font-size: 3.5vh;
        line-height: 1.7;
    }
    
    .left-content .page-doodle {
        font-size: 3vh;
        margin-top: 2vh;
    }
    
    .handwritten-text {
        font-size: 3.5vh;
    }
    
    .big-text {
        font-size: 4vh;
    }
    
    .chapter-badge {
        font-size: 3vh;
        padding: 1vh 2.5vmin;
    }
    
    /* Media/images bigger */
    .media-item.polaroid {
        padding: 1vmin 1vmin 3vmin 1vmin;
    }
    
    .media-item img,
    .media-item video {
        max-height: 85vh;
    }
    
    .media-grid-page .polaroid {
        width: 48%;
        max-width: 40vh;
    }
    
    .media-grid-page.grid-3 .polaroid {
        width: 32%;
        max-width: 36vh;
    }
    
    .polaroid.small {
        width: 46%;
        max-width: 38vh;
    }
    
    /* Page 12 responsive */
    #page-12 .polaroid.small {
        width: 48%;
        max-width: 45vh;
    }
    
    .media-caption {
        font-size: 1.8vh;
    }
    
    .cover-title {
        font-size: 5vh;
    }
    
    .cover-subtitle {
        font-size: 2.5vh;
    }
    
    /* Page indicators */
    .page-indicator {
        bottom: 1vh;
        font-size: 1.5vh;
        padding: 0.6vh 2vw;
    }
}

@media screen and (max-height: 400px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 55vh;
        height: 85vh;
    }
    
    .photobook-wrapper.book-open {
        transform: translateX(0);
    }
    
    /* Left page content responsive */
    .left-content {
        padding: 3vh 3vw;
    }
    
    .left-content .chapter-badge {
        font-size: 2.8vh;
        padding: 0.8vh 2vw;
        margin-bottom: 1.5vh;
    }
    
    .left-content .handwritten-text {
        font-size: 3vh;
        line-height: 1.6;
    }
    
    .left-content .page-doodle {
        font-size: 2.5vh;
        margin-top: 1.5vh;
    }
    
    .handwritten-text {
        font-size: 3vh;
    }
    
    .spread-left,
    .spread-right {
        padding: 3vh 3vw;
    }
    
    .cover-title {
        font-size: 4.5vh;
    }
    
    .cover-subtitle {
        font-size: 2.2vh;
    }
    
    .page-indicator {
        bottom: 0.5vh;
        font-size: 1.5vh;
        padding: 0.6vh 1.5vw;
    }
}

/* ===== MOBILE PHONE RESPONSIVE - Various Screen Sizes ===== */
/* Small phones (iPhone SE, older phones) */
@media screen and (max-width: 700px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 45vw;
        height: 90vh;
        max-height: 90vh;
    }
    
    .photobook-wrapper {
        gap: 0;
    }
    
    .left-content .handwritten-text {
        font-size: 2.5vh;
        line-height: 1.5;
    }
    
    .corner-note {
        font-size: 1.8vh !important;
    }
    
    .media-grid-page .polaroid {
        width: 42%;
        max-width: 35vh;
    }
    
    .media-grid-page.grid-3 .polaroid {
        width: 30%;
        max-width: 28vh;
    }
    
    #page-4 .media-grid-page .polaroid {
        width: 28%;
        max-width: 24vh;
    }
}

/* Medium phones */
@media screen and (max-width: 850px) and (min-width: 701px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 42vw;
        height: 88vh;
        max-height: 88vh;
    }
    
    .left-content .handwritten-text {
        font-size: 2.8vh;
    }
}

/* Tall phones (iPhone X, 11, 12, 13, 14, Samsung Galaxy) */
@media screen and (max-height: 450px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 42vw;
        height: 85vh;
        max-height: 85vh;
    }
    
    .media-grid-page .polaroid {
        width: 40%;
        max-width: 32vh;
    }
    
    .media-grid-page.grid-3 .polaroid {
        width: 32%;
        max-width: 30vh;
    }
    
    #page-4 .media-grid-page .polaroid {
        width: 30%;
        max-width: 26vh;
    }
    
    .left-content .handwritten-text {
        font-size: 2.5vh;
        line-height: 1.4;
    }
    
    .corner-note {
        font-size: 1.6vh !important;
        padding: 0.3vh 1vw !important;
    }
    
    .big-text {
        font-size: 3vh !important;
    }
    
    .chapter-badge {
        font-size: 2.2vh;
        padding: 0.6vh 2vw;
    }
    
    .cover-title {
        font-size: 4vh;
    }
    
    .cover-subtitle {
        font-size: 2vh;
    }
    
    .media-caption {
        font-size: 1.5vh;
    }
}

/* Very short phones */
@media screen and (max-height: 380px) and (orientation: landscape) {
    .photobook,
    .left-page {
        width: 40vw;
        height: 82vh;
    }
    
    .left-content {
        padding: 2vh 2vw;
    }
    
    .left-content .handwritten-text {
        font-size: 2.2vh;
        line-height: 1.3;
    }
    
    .corner-note {
        font-size: 1.4vh !important;
    }
    
    .media-grid-page .polaroid {
        width: 38%;
        max-width: 28vh;
    }
    
    .media-grid-page.grid-3 .polaroid {
        width: 28%;
        max-width: 24vh;
    }
    
    #page-4 .media-grid-page .polaroid {
        width: 26%;
        max-width: 22vh;
    }
}

/* ==================== SECTION 3: LOVE TIMER ==================== */
/* ===== OPTIMIZED FOR LANDSCAPE - NO SCROLL ===== */

.page-timer {
    overflow: hidden;
    height: 100vh;
    width: 100vw;
}

.love-timer-section {
    display: none;
    width: 100vw;
    height: 100vh;
    align-items: center;
    justify-content: center;
    padding: 0;
    position: relative;
    overflow: hidden;
    background: transparent;
    z-index: 2;
    pointer-events: none; /* Allow starfield interaction */
}

.love-timer-section.visible {
    display: flex;
}

/* Glassmorphism Container - Responsive */
.timer-container {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 3vmin;
    padding: 2vh 3vw;
    max-width: 90vw;
    max-height: 92vh;
    width: auto;
    text-align: center;
    box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.3),
        inset 0 0 80px rgba(255, 105, 180, 0.05);
    animation: containerFadeIn 0.8s ease-out;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 1.5vh;
    pointer-events: auto; /* Re-enable interaction for content */
}

@keyframes containerFadeIn {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Timer Header - Responsive */
.timer-header {
    margin-bottom: 1vh;
}

.timer-heart-icon {
    font-size: 5vmin;
    color: var(--pink-main);
    margin-bottom: 0.5vh;
    animation: timerHeartbeat 1.5s ease-in-out infinite;
}

@keyframes timerHeartbeat {
    0%, 100% { transform: scale(1); }
    15% { transform: scale(1.15); }
    30% { transform: scale(1); }
    45% { transform: scale(1.15); }
}

.timer-title {
    font-family: var(--font-main);
    font-size: 4vmin;
    font-weight: 700;
    color: var(--text-light);
    margin: 0;
}

/* Main Timer Display - Responsive */
.timer-display {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2vmin;
    flex-wrap: nowrap;
    margin-bottom: 1.5vh;
}

.timer-unit {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 12vmin;
}

.timer-value {
    font-family: var(--font-main);
    font-size: 8vmin;
    font-weight: 700;
    color: var(--pink-main);
    line-height: 1;
    text-shadow: 0 0 30px rgba(255, 20, 147, 0.5);
    transition: transform 0.1s ease;
}

.timer-value.tick {
    transform: scale(1.1);
}

.timer-label {
    font-family: var(--font-main);
    font-size: 2.2vmin;
    color: var(--text-soft);
    margin-top: 0.5vh;
    font-weight: 500;
}

.timer-separator {
    font-size: 6vmin;
    font-weight: 700;
    color: var(--pink-soft);
    opacity: 0.6;
    margin-bottom: 3vmin;
    animation: separatorBlink 1s ease-in-out infinite;
}

@keyframes separatorBlink {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 0.2; }
}

/* Fun Stats Grid - Responsive for Landscape */
.fun-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2vmin;
    margin-top: 1vh;
    padding-top: 1.5vh;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: 2vmin;
    padding: 1.5vh 1.5vmin;
    text-align: center;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(20px);
    cursor: pointer;
}

.stat-card.animated {
    opacity: 1;
    transform: translateY(0);
}

.stat-card:hover {
    background: rgba(255, 255, 255, 0.12);
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(255, 77, 109, 0.3);
    border-color: rgba(255, 182, 193, 0.3);
}

.stat-card i {
    font-size: 4vmin;
    color: var(--pink-soft);
    margin-bottom: 0.5vh;
    display: block;
}

.stat-number {
    font-family: var(--font-main);
    font-size: 4vmin;
    font-weight: 700;
    color: var(--text-light);
    display: inline;
}

.stat-suffix {
    font-family: var(--font-main);
    font-size: 2.5vmin;
    font-weight: 600;
    color: var(--pink-soft);
}

.stat-card .stat-label {
    display: block;
    font-family: var(--font-main);
    font-size: 2vmin;
    color: var(--text-soft);
    margin-top: 0.5vh;
}

/* ==================== GAMIFICATION ANIMATIONS ==================== */

/* Heart Explosion Effect */
@keyframes heartExplode {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0);
    }
    50% {
        opacity: 1;
        transform: translate(calc(-50% + var(--tx) * 0.7), calc(-50% + var(--ty) * 0.7)) scale(1.2);
    }
    100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.5);
    }
}

/* Card Bounce Animation */
@keyframes cardBounce {
    0%, 100% { transform: translateY(0); }
    30% { transform: translateY(-10px) scale(1.05); }
    60% { transform: translateY(-5px); }
}

/* Card Shake Animation */
@keyframes cardShake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-5px) rotate(-2deg); }
    40% { transform: translateX(5px) rotate(2deg); }
    60% { transform: translateX(-3px) rotate(-1deg); }
    80% { transform: translateX(3px) rotate(1deg); }
}

/* Angry Face Shake */
.shake-angry {
    animation: shakeAngry 0.5s ease-in-out infinite !important;
}

@keyframes shakeAngry {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
}

/* Toast Notification */
@keyframes toastIn {
    from {
        opacity: 0;
        transform: translate(-50%, -100%) scale(0.8);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -100%) scale(1);
    }
}

@keyframes toastOut {
    from {
        opacity: 1;
        transform: translate(-50%, -100%) scale(1);
    }
    to {
        opacity: 0;
        transform: translate(-50%, -120%) scale(0.8);
    }
}

/* Tea Fill Animation */
@keyframes teaFill {
    0% { transform: scale(1); color: var(--pink-soft); }
    25% { transform: scale(1.3) rotate(-10deg); }
    50% { transform: scale(1.4) rotate(10deg); color: #ff6b95; }
    75% { transform: scale(1.3) rotate(-5deg); }
    100% { transform: scale(1); color: var(--pink-soft); }
}

/* Bubble Float */
@keyframes bubbleFloat {
    0% {
        opacity: 1;
        transform: translateY(0) scale(0.5);
    }
    100% {
        opacity: 0;
        transform: translateY(-60px) scale(1);
    }
}

/* Sparkle Effect */
@keyframes sparkleEffect {
    0% {
        opacity: 1;
        transform: scale(0) rotate(0deg);
    }
    50% {
        opacity: 1;
        transform: scale(1.2) rotate(180deg);
    }
    100% {
        opacity: 0;
        transform: scale(0.5) rotate(360deg);
    }
}

/* Happy Card State */
.stat-card.happy {
    background: linear-gradient(135deg, rgba(255, 107, 149, 0.3), rgba(255, 182, 193, 0.2)) !important;
    border-color: rgba(255, 107, 149, 0.5) !important;
}

.stat-card.happy i {
    color: #ff6b95 !important;
    animation: happyBounce 0.5s ease infinite !important;
}

@keyframes happyBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

/* Filling State */
.stat-card.filling {
    background: linear-gradient(135deg, rgba(139, 69, 19, 0.2), rgba(210, 180, 140, 0.15)) !important;
}

/* Scroll Hint - Hidden in landscape */
.timer-scroll-hint {
    display: none;
}

/* Timer Navigation - Responsive */
.timer-nav {
    display: flex;
    justify-content: center;
    gap: 3vmin;
    margin-top: 1.5vh;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 1.5vmin;
    padding: 1.2vh 3vmin;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 25px;
    color: var(--text-soft);
    font-family: var(--font-main);
    font-size: 2.5vmin;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
}

.nav-link:hover {
    background: var(--pink-soft);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
}

.nav-link i {
    font-size: 2.5vmin;
    transition: transform 0.3s ease;
}

.nav-prev:hover i {
    transform: translateX(-3px);
}

.nav-next:hover i {
    transform: translateX(3px);
}

/* ==================== SECTION 4: 3D HEART ==================== */
.section-3d-heart {
    background: linear-gradient(180deg, #0d1b2a 0%, var(--bg-dark) 100%);
    min-height: 100vh;
    padding-bottom: 100px;
}

#three-container {
    width: 100%;
    height: 60vh;
    min-height: 400px;
    position: relative;
    margin: 20px 0;
}

.controls-hint {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: var(--text-soft);
    font-size: 0.9rem;
    opacity: 0.7;
    margin-top: 10px;
}

.controls-hint i {
    color: var(--pink-soft);
    animation: pointAnimation 1.5s ease-in-out infinite;
}

@keyframes pointAnimation {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(10px); }
}

/* 3D Element Cards */
.element {
    width: 120px;
    height: 160px;
    background: linear-gradient(135deg, var(--pink-soft), var(--purple-soft));
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.element:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 30px rgba(255, 105, 180, 0.5);
}

.element img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.element .placeholder-text {
    color: white;
    font-size: 0.8rem;
    text-align: center;
    padding: 10px;
}

/* ==================== SECTION 5: FINAL ==================== */
.section-final {
    background: linear-gradient(180deg, var(--bg-dark) 0%, #1a0520 100%);
    text-align: center;
}

.final-content {
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-smooth);
}

.final-content.visible {
    opacity: 1;
    transform: translateY(0);
}

.final-heart {
    font-size: 5rem;
    color: var(--pink-main);
    margin-bottom: 30px;
    animation: heartbeat 1.5s ease-in-out infinite;
}

.final-title {
    font-size: clamp(2rem, 7vw, 3.5rem);
    font-weight: 700;
    background: linear-gradient(135deg, var(--pink-light), var(--pink-main), var(--red-pastel));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 30px;
}

.final-message {
    font-size: clamp(1.1rem, 3.5vw, 1.3rem);
    color: var(--text-soft);
    max-width: 600px;
    margin: 0 auto 40px;
    line-height: 1.8;
}

.final-signature {
    font-size: 1.2rem;
    color: var(--text-light);
    font-style: italic;
}

.signature-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--pink-main);
}

.final-date {
    margin-top: 40px;
    font-size: 1rem;
    color: var(--pink-soft);
    opacity: 0.8;
}

/* ==================== SCROLL INDICATOR ==================== */
.scroll-indicator {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    color: var(--text-soft);
    font-size: 0.9rem;
    opacity: 0.7;
    animation: bounce 2s ease-in-out infinite;
}

.scroll-indicator i {
    font-size: 1.2rem;
    color: var(--pink-soft);
}

@keyframes bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(10px); }
}

/* ==================== PHOTO MODAL ==================== */
.photo-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-smooth);
}

.photo-modal.active {
    opacity: 1;
    visibility: visible;
}

.modal-content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
}

.modal-content img {
    max-width: 100%;
    max-height: 80vh;
    border-radius: 15px;
    box-shadow: 0 10px 50px rgba(255, 105, 180, 0.3);
}

.modal-close {
    position: absolute;
    top: -40px;
    right: 0;
    background: none;
    border: none;
    color: white;
    font-size: 2rem;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.modal-close:hover {
    color: var(--pink-main);
    transform: rotate(90deg);
}

/* ==================== MUSIC TOGGLE ==================== */
.music-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--pink-main), var(--pink-soft));
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 999;
    box-shadow: 0 4px 20px rgba(255, 20, 147, 0.4);
    transition: var(--transition-smooth);
    opacity: 0;
    visibility: hidden;
}

.music-toggle.visible {
    opacity: 1;
    visibility: visible;
}

.music-toggle:hover {
    transform: scale(1.1);
}

.music-toggle.playing {
    animation: musicPulse 1s ease-in-out infinite;
}

@keyframes musicPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.music-toggle.muted i::before {
    content: "\f6a9"; /* fa-volume-mute */
}

/* ==================== RESPONSIVE DESIGN ==================== */
@media (max-width: 768px) {
    .section {
        padding: 40px 15px;
    }
    
    .time-counter {
        gap: 10px;
    }
    
    .counter-item {
        padding: 15px 18px;
        min-width: 80px;
    }
    
    .fun-stats {
        gap: 15px;
    }
    
    .stat-item {
        min-width: 45%;
    }
    
    .element {
        width: 80px;
        height: 100px;
    }
    
    #three-container {
        height: 50vh;
        min-height: 350px;
    }
    
    .pulse-button {
        padding: 15px 35px;
    }
}

@media (max-width: 480px) {
    .intro-icon {
        font-size: 3rem;
    }
    
    .counter-item {
        padding: 12px 15px;
        min-width: 70px;
    }
    
    .counter-value {
        font-size: 1.8rem;
    }
    
    .element {
        width: 60px;
        height: 80px;
        border-radius: 8px;
    }
}

/* ==================== ANIMATIONS FOR SCROLL REVEAL ==================== */
.reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-smooth);
}

.reveal.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ==================== SECTION 4: 3D HEART GALLERY ==================== */
.page-gallery {
    background: transparent;
}

.heart-gallery-section {
    min-height: 100vh;
    padding: 10px 10px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 15px;
    background: transparent;
    position: relative;
    z-index: 2;
    pointer-events: none; /* Allow starfield interaction */
}

/* Gallery Header */
.gallery-header {
    text-align: center;
    margin-bottom: 10px;
    pointer-events: auto; /* Re-enable interaction for content */
}

.gallery-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--pink-soft);
    margin-bottom: 10px;
    text-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
}

.gallery-title i {
    font-size: 1.5rem;
    margin: 0 10px;
    animation: heartPulse 1.5s ease-in-out infinite;
}

.gallery-subtitle {
    color: var(--text-soft);
    font-size: 1rem;
    opacity: 0.8;
}

/* 3D Heart Container */
.heart-3d-container {
    perspective: 1000px;
    width: 320px;
    height: 300px;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: auto; /* Re-enable interaction for content */
}

.heart-3d {
    position: relative;
    width: 280px;
    height: 260px;
    transform-style: preserve-3d;
    cursor: grab;
    transition: transform 0.1s ease-out;
}

/* Heart Photos positioned in heart shape */
.heart-photo {
    position: absolute;
    width: 90px;
    height: 90px;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 
        0 5px 20px rgba(255, 105, 180, 0.4),
        0 0 30px rgba(255, 20, 147, 0.2);
    transition: all 0.4s ease;
    cursor: pointer;
}

.heart-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
}

.heart-photo:hover {
    transform: scale(1.15) translateZ(30px);
    z-index: 10;
    box-shadow: 
        0 10px 40px rgba(255, 105, 180, 0.6),
        0 0 50px rgba(255, 20, 147, 0.4);
}

.heart-photo:hover img {
    transform: scale(1.1);
}

.photo-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    padding: 10px 5px 5px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.heart-photo:hover .photo-overlay {
    opacity: 1;
}

.photo-overlay span {
    color: white;
    font-size: 0.7rem;
    display: block;
    text-align: center;
}

/* Heart Shape Positioning */
.photo-1 { top: 0; left: 50%; transform: translateX(-50%) translateZ(20px); }
.photo-2 { top: 30px; left: 10%; transform: translateZ(15px); }
.photo-3 { top: 30px; right: 10%; transform: translateZ(15px); }
.photo-4 { top: 100px; left: 25%; transform: translateZ(10px); }
.photo-5 { top: 100px; right: 25%; transform: translateZ(10px); }
.photo-6 { bottom: 20px; left: 50%; transform: translateX(-50%) translateZ(25px); }

/* ==================== 3D PHOTO SPHERE ==================== */
.sphere-3d-wrapper {
    position: relative;
    width: 100%;
    height: 80vh;
    min-height: 350px;
    max-height: 600px;
    display: flex;
    justify-content: center;
    align-items: center;
    touch-action: none;
    user-select: none;
    pointer-events: auto; /* Enable interaction */
}

#sphere-canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
    touch-action: none;
}

/* Gallery Grid - Keep for backward compatibility */
.gallery-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    max-width: 600px;
    width: 100%;
    padding: 0 10px;
}

.gallery-item {
    position: relative;
    aspect-ratio: 4/3;
    border-radius: 15px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    animation: fadeInUp 0.6s ease forwards;
    opacity: 0;
}

.gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
}

.gallery-item:hover img {
    transform: scale(1.1);
}

.gallery-item-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 20, 147, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-item-overlay i {
    font-size: 2rem;
    color: white;
    animation: heartPulse 1s ease-in-out infinite;
}

.gallery-item:hover .gallery-item-overlay {
    opacity: 1;
}

/* Gallery Navigation */
.gallery-nav {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 20px;
    pointer-events: auto;
}

/* Lightbox */
.lightbox {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.95);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.lightbox.active {
    opacity: 1;
    visibility: visible;
}

.lightbox-content {
    max-width: 90vw;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.lightbox-content img {
    max-width: 100%;
    max-height: 70vh;
    border-radius: 15px;
    box-shadow: 0 10px 50px rgba(255, 105, 180, 0.3);
    animation: zoomIn 0.3s ease;
}

.lightbox-caption {
    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.lightbox-close:hover {
    background: var(--pink-main);
    transform: rotate(90deg);
}

.lightbox-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.lightbox-nav:hover {
    background: var(--pink-soft);
}

.lightbox-prev {
    left: 20px;
}

.lightbox-next {
    right: 20px;
}

@keyframes zoomIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Gallery Responsive */
@media (max-width: 768px) {
    .sphere-3d-wrapper {
        height: 70vh;
        min-height: 320px;
        max-height: none;
    }
    
    .heart-gallery-section {
        padding: 10px;
        gap: 10px;
    }
    
    .lightbox-nav {
        width: 40px;
        height: 40px;
    }
}

@media (max-width: 480px) {
    .sphere-3d-wrapper {
        height: 65vh;
        min-height: 280px;
        max-height: none;
    }
    
    .lightbox-close,
    .lightbox-nav {
        width: 40px;
        height: 40px;
        font-size: 1rem;
    }
}

/* Landscape mobile for gallery */
@media (max-height: 500px) and (orientation: landscape) {
    .sphere-3d-wrapper {
        height: 80vh;
        min-height: 200px;
        max-height: none;
    }
    
    .heart-gallery-section {
        padding: 5px 10px;
        gap: 5px;
    }
}

/* ==================== SECTION 5: FINALE PAGE ==================== */
.page-finale {
    background: transparent;
}

.finale-section {
    min-height: 100vh;
    padding: 40px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    background: transparent;
    position: relative;
    z-index: 2;
    pointer-events: none; /* Allow starfield interaction */
}

/* Sparkles Container */
.sparkles-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 1;
}

.sparkle {
    position: absolute;
    animation: sparkleAnim 2s ease-out forwards;
}

@keyframes sparkleAnim {
    0% {
        opacity: 1;
        transform: scale(0) rotate(0deg);
    }
    50% {
        opacity: 1;
        transform: scale(1) rotate(180deg);
    }
    100% {
        opacity: 0;
        transform: scale(0.5) rotate(360deg);
    }
}

/* Finale Heart */
.finale-heart-container {
    position: relative;
    width: 150px;
    height: 150px;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: auto;
}

.finale-heart {
    font-size: 5rem;
    color: var(--pink-main);
    animation: finaleHeartBeat 1.2s ease-in-out infinite;
    filter: drop-shadow(0 0 30px rgba(255, 20, 147, 0.6));
    z-index: 2;
}

@keyframes finaleHeartBeat {
    0%, 100% { transform: scale(1); }
    15% { transform: scale(1.15); }
    30% { transform: scale(1); }
    45% { transform: scale(1.1); }
    60% { transform: scale(1); }
}

/* Heart Rings */
.heart-rings {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.ring {
    position: absolute;
    border: 2px solid var(--pink-soft);
    border-radius: 50%;
    opacity: 0;
    animation: ringPulse 3s ease-out infinite;
}

.ring-1 {
    width: 100px;
    height: 100px;
    top: -50px;
    left: -50px;
    animation-delay: 0s;
}

.ring-2 {
    width: 140px;
    height: 140px;
    top: -70px;
    left: -70px;
    animation-delay: 1s;
}

.ring-3 {
    width: 180px;
    height: 180px;
    top: -90px;
    left: -90px;
    animation-delay: 2s;
}

@keyframes ringPulse {
    0% {
        opacity: 0.8;
        transform: scale(0.5);
    }
    100% {
        opacity: 0;
        transform: scale(1.5);
    }
}

/* Finale Card */
.finale-card {
    position: relative;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    border-radius: 30px;
    border: 1px solid rgba(255, 182, 193, 0.3);
    padding: 40px 30px;
    max-width: 450px;
    width: 100%;
    text-align: center;
    box-shadow: 
        0 20px 60px rgba(255, 105, 180, 0.2),
        inset 0 0 30px rgba(255, 192, 203, 0.05);
    pointer-events: auto; /* Re-enable interaction for content */
}

.card-decoration {
    position: absolute;
    font-size: 1.5rem;
    opacity: 0.6;
    animation: floatDecoration 3s ease-in-out infinite;
}

.top-left { top: 15px; left: 15px; }
.top-right { top: 15px; right: 15px; animation-delay: 0.5s; }
.bottom-left { bottom: 15px; left: 15px; animation-delay: 1s; }
.bottom-right { bottom: 15px; right: 15px; animation-delay: 1.5s; }

@keyframes floatDecoration {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-5px) rotate(10deg); }
}

.finale-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--pink-soft);
    margin-bottom: 25px;
    text-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
}

.finale-message {
    margin-bottom: 30px;
}

.message-line {
    font-size: 1.1rem;
    color: var(--text-soft);
    margin: 12px 0;
    line-height: 1.6;
}

.message-line .highlight {
    color: var(--pink-main);
    font-weight: 600;
    text-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
}

.finale-signature {
    margin-top: 25px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 182, 193, 0.2);
}

.signature-text {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--pink-soft);
    font-style: italic;
    margin-bottom: 10px;
}

.signature-hearts {
    display: flex;
    justify-content: center;
    gap: 10px;
    font-size: 1.5rem;
}

.signature-hearts span {
    animation: heartBounce 1.5s ease-in-out infinite;
}

.signature-hearts span:nth-child(2) { animation-delay: 0.2s; }
.signature-hearts span:nth-child(3) { animation-delay: 0.4s; }

@keyframes heartBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

/* Promise Section */
.promise-section {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(15px);
    border-radius: 20px;
    border: 1px solid rgba(255, 182, 193, 0.2);
    padding: 25px;
    max-width: 400px;
    width: 100%;
    pointer-events: auto;
}

.promise-title {
    font-size: 1.3rem;
    color: var(--pink-soft);
    text-align: center;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.promise-title i {
    color: var(--pink-main);
    animation: rotate 4s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.promise-list {
    list-style: none;
}

.promise-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    color: var(--text-soft);
    font-size: 1rem;
    border-bottom: 1px solid rgba(255, 182, 193, 0.1);
}

.promise-item:last-child {
    border-bottom: none;
}

.promise-item i {
    color: var(--pink-main);
    font-size: 1.1rem;
}

/* Finale Navigation */
.finale-nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
    pointer-events: auto;
}

.nav-home {
    background: linear-gradient(135deg, var(--pink-soft), var(--pink-main)) !important;
}

.nav-home:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 25px rgba(255, 105, 180, 0.5);
}

/* Replay Button */
.replay-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 15px 30px;
    background: transparent;
    border: 2px solid var(--pink-soft);
    border-radius: 30px;
    color: var(--pink-soft);
    font-family: var(--font-main);
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 10px;
    pointer-events: auto;
}

.replay-btn:hover {
    background: var(--pink-soft);
    color: white;
    transform: scale(1.05);
}

.replay-btn i {
    transition: transform 0.3s ease;
}

.replay-btn:hover i {
    transform: rotate(360deg);
}

/* Confetti Canvas */
#confetti-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

/* Finale Responsive */
@media (max-width: 768px) {
    .finale-heart {
        font-size: 4rem;
    }
    
    .finale-card {
        padding: 30px 20px;
    }
    
    .finale-title {
        font-size: 1.6rem;
    }
    
    .message-line {
        font-size: 1rem;
    }
}

@media (max-width: 480px) {
    .finale-heart {
        font-size: 3.5rem;
    }
    
    .finale-heart-container {
        width: 120px;
        height: 120px;
    }
    
    .ring-1 {
        width: 80px;
        height: 80px;
        top: -40px;
        left: -40px;
    }
    
    .ring-2 {
        width: 110px;
        height: 110px;
        top: -55px;
        left: -55px;
    }
    
    .ring-3 {
        width: 140px;
        height: 140px;
        top: -70px;
        left: -70px;
    }
    
    .finale-title {
        font-size: 1.4rem;
    }
    
    .message-line {
        font-size: 0.95rem;
    }
    
    .promise-title {
        font-size: 1.1rem;
    }
    
    .promise-item {
        font-size: 0.9rem;
    }
}

